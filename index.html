<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Crypto Bot</title>
</head>
<body>
<h2>Crypto Bot (TEST)</h2>
<p id="info">Открыто в браузере</p>

<input id="amount" type="number" placeholder="Сумма">
<button onclick="deposit()">Пополнить (TEST)</button>
<button onclick="withdraw()">Вывести</button>

<script>
let tg = window.Telegram?.WebApp;
let userId = null;

if (tg) {
  tg.ready();
  userId = tg.initDataUnsafe.user.id;
  document.getElementById("info").innerText = "Telegram user: " + userId;
}

function send(action, data) {
  if (!tg) {
    alert("Открой через Telegram");
    return;
  }
  tg.sendData(JSON.stringify({
    action: action,
    user_id: userId,
    ...data
  }));
  tg.close();
}

function deposit() {
  send("deposit", { amount: Number(amount.value) });
}

function withdraw() {
  send("withdraw", { amount: Number(amount.value) });
}
</script>
</body>
</html>